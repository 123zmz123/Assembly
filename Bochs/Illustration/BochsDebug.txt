断点 b 0x7c00 物理地址断点

单步执行 s

越过循环体 n
    因为循环次数在CX中,Bochs可以自动监视整个循环过程
    注意事项:命令n对下面的循环体无效
            show:
                    mov al,[bx+si]
                    add al,0x30
                    mov ah,0x04
                    mov [es:di],ax
                    add di,2
                    dec si
                    jns show
    原因很简单,条件转移指令不是循环指令,转移到的目标位置一般位于前方,而不是像这里,目标位置是先前执行过的指令,恰巧构成循环

显示通用寄存器内容 r

显示段寄存器内容 sreg
    在32位和64位处理器中除了CS 代码段寄存器
                          DS 数据段寄存器
                          ES 附加段寄存器
                          SS 栈段寄存器
                      新增FS和GS,以上6个段寄存器都是16位,但都额外增加了一个不可访问的部分,叫做段描述符高速缓存器
                      段描述符高速缓存器由处理器内部使用,里面存放了段的起始地址,扩展范围等各种属性,比如它是代码段还是数据段,是否可以写入,是否被访问过等等

显示标志寄存器info eflags
    15  14  13  12  11  10  09  08  07  06  05  04  03  02  01  00
                    OF  DF  IF  TF  SF  ZF      AF      PF      CF
    标志小写表示标志为0,大写表示为1
    OF      溢出标志
    DF      方向标志
    IF/TF   中断有关标志
    SF      符号标志
    ZF      零标志
    AF      辅助进位标志
    PF      奇偶标志    当运算结果出来后,如果最低8位中有偶数个为1的比特,PF=1,否则PF=0
    CF      进位标志    当处理器进行算术运算时,如果最高位有向前进位或借位的情况发生,CF=1,否则CF=0

显示内存中的内容 xp 0xb8000
    xp每次只显示一个双字32位,要显示多个双字,需要用xp/数量
    双字在内存中的存放是按低端字节序的,0x0b6c074c对应着从物理地址0xb8000开始的4个字节0x4c 0x07 0x6c 0x0b

显示内容 info gdt或...
    GDT[0x01]表示GDT的1号槽位
    Code Segment表示代码段
    base表示段的32位基地址
    limit表示段界限值
    Execute-Only表示只执行
    Non-Conforming表示非依从
    32-bit表示这是一个32位的段

        GDTR全局描述符表寄存器  GDTR全局描述符表  LDT局部描述符表  TSS任务状态段 PDBR页目录基地址寄存器
            显示LDT和TSS的内容时,Bochs要先从处理器的TR和LDTR寄存器获取基地址和界限信息,因此显示的是当前任务的LDT和TSS

显示控制寄存器的内容 creg
    32位处理器有多个控制寄存器,Bochs给出各个控制位的状态,小写表示该位是0,大写表示该位是1,即处于置位状态

反汇编命令,用于跳过特殊性循环 u/2 物理地址 第一个参数为跟在/后面的数字,指定反汇编多少条指令,第二个参数指定从哪个物理地址开始反汇编,如果从当前处反汇编课省略第二个参数
    命令执行后会显示反汇编代码及所在物理地址,此时可以使用b 物理地址 设置断点并继续执行,即可跳出特殊循环
    特殊循环
        show:
         mov al,[bx+si]
         add al,0x30
         mov ah,0x04
         mov [es:di],ax
         add di,2
         dec si
         jns show
    以上是一个特殊循环,无法使用命令n越过循环体
    注意事项:Bochs会把非指令的数据也视为指令,可能导致反汇编不正确

显示线性地址到物理页的映射信息 page 0x7e08

显示当前任务的页表 info tab

显示一个线性地址单元的内容 x 0x0

线性地址断点 lb/vb

退出 q